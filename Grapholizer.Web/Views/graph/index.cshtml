@model Grapholizer.Web.Models.GraphDisplayModel
<!DOCTYPE html>

<html>
<head>
  <meta name="viewport" content="width=device-width" />
  <title>GRAPH</title>
  <script src="~/Script/SigmaJS/sigma.js"></script>
  <script src="~/Script/SigmaJS/plugins/sigma.parsers.json.min.js"></script>
  <script src="~/Script/SigmaJS/plugins/sigma.layout.forceAtlas2.min.js"></script>
  <script src="~/Script/SigmaJS/plugins/sigma.renderers.customShapes.min.js"></script>
  <script src="~/Script/SigmaJS/plugins/sigma.renderers.customEdgeShapes.min.js"></script>
  <script src="~/Script/SigmaJS/plugins/sigma.renderers.edgeLabels.min.js"></script>
  <style type="text/css">
    #sigma-container {
      width: 100%;
      height: 450px;
      border: 1px solid red;
    }
  </style>
</head>
<body>
  <div>
    <h1>Graph</h1>
    <div id="sigma-container"></div>
  </div>

  <script>
    loadGraph('http://localhost/grapholizer.api/graph/@Model.Name/@Model.Node/@Model.Id?size=@Model.Size');

    var graph = null;

    function loadGraph(url) {
      sigma.parsers.json(
        url,
        {
          renderer: {
            // IMPORTANT:
            // This works only with the canvas renderer, so the
            // renderer type set as "canvas" is necessary here.
            container: 'sigma-container',
            type: 'canvas'
          },
          settings:
          {
            labelThreshold: 5,
            minNodeSize: 1,
            maxNodeSize: 10,
            minEdgeSize: 0.1,
            maxEdgeSize: 1,
            enableEdgeHovering: true,
            edgeHoverSizeRatio: 2
          }
        },
        function (s) {
          //CustomShapes.init(s);
          //s.startForceAtlas2({ slowDown: 200 })
          graph = s;

          s.bind("clickNode", loadNode)
        });
    }

    function loadNode(n) {
      if (n.data.node.selfLink != '') {
        if (graph != null)
          graph.kill();

        loadGraph(n.data.node.selfLink);
      }
    }
  </script>

</body>
</html>
